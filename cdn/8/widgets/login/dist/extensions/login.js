System.register(["jimu-core"],(function(e,t){var r={};return{setters:[function(e){r.SessionManager=e.SessionManager}],execute:function(){e((()=>{"use strict";var e={891:e=>{e.exports=r}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{n.r(o),n.d(o,{default:()=>r});var e=n(891),t=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function u(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}d((n=n.apply(e,t||[])).next())}))};class r{constructor(){this.id="login",this.widgetId="widget_28"}process(r){return t(this,void 0,void 0,(function*(){if(window.jimuConfig.isInBuilder)return Promise.resolve(r);const t=e.SessionManager.getInstance().getSessions();if(!(t&&t.length>0)){const e=this.findWidgetIdByUri(r,"widgets/common/edit/");if(e)return this.removeWidgetFromLayout(r,yield e)}return Promise.resolve(r)}))}removeWidgetFromLayout(e,r){return t(this,void 0,void 0,(function*(){const t=JSON.parse(JSON.stringify(e)),n=e.widgets.widget_5.layouts.controller.LARGE,o=e.layouts.layout_2.content,i=e.layouts.layout_2.order,s=Object.entries(o).find((([e,t])=>t.widgetId===r));if(s){const[e]=s;delete o[e],t.layouts[n].order=i.filter((t=>t!==e)),t.layouts[n].content=o}return t}))}findWidgetIdByUri(e,r){return t(this,void 0,void 0,(function*(){for(const t in e.widgets)if(e.widgets.hasOwnProperty(t)&&e.widgets[t].uri===r)return t;return null}))}}})(),o})())}}}));